<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>针对HTTP/2的一些优化 · mbxo</title><meta name="description" content="针对HTTP/2的一些优化 - hiroya"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="theme-color" content="#00bcd4"><link rel="short icon" href="/hexo-theme-mbxo/favicon.icon"><link rel="stylesheet" href="/hexo-theme-mbxo/mobi.min.css"><link rel="search" type="application/opensearchdescription+xml" href="https://alleysakura.github.io/hexo-theme-mbxo/atom.xml" title="mbxo"></head><body><br><div class="flex-center"><div class="container"><header class="theme-header"><div class="flex-left top-gap"><div class="unit site-box"><a href="/" target="_self">HOME</a></div><div class="unit site-box"><a href="/Links" target="_self">LINKS</a></div><div class="unit site-box"><a href="/About" target="_self">ABOUT</a></div><div class="unit site-box"><a href="/atom.xml" target="_self">RSS</a></div></div><hr></header><article><div class="post"><article><h1>针对HTTP/2的一些优化</h1><h5>2016年2月20日</h5><div><p>HTTP/2现在来说已经不新鲜了,很多博客第一时间都用上了HTTP/2.但是里面有很多小细节值得推敲!</p>
<p>很多人打开chrome的控制台一看,WoW~ h2启用成功了.实际上并不然,这只代表了服务器给你发出了HTTP/2的CipherSuite,不一定真的启用了HTTP/2.但是我们可以用抓包工具来check.这个就不详细说明了.看使用文档去23333333<br>但我们可以用更简单的方法来检验-&gt;SSLLABS<a href="https://ssllabs.com" target="_blank" rel="external">https://www.ssllabs.com</a>这是一款在线的ssl检测的网站,权威且专业.<br>检测完毕后,我们可以查看Handshake Simulation,从IE6到最新的Edge都有<br>如果没有使用HTTP/2,则显示<br><code>TLS 1.2 &gt; http/1.1</code><br>如果HTTP/2启用成功,则显示<br><code>TLS 1.2 &gt; h2</code></p>
<p>如果算法调不好,甚至还会出现Chrome和ff无法访问的情况<br>如何正确的使用HTTP/2.关于握手算法我推荐<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssl_ciphers  ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:AES128-GCM-SHA256:AES256-GCM-SHA384;</div></pre></td></tr></table></figure></p>
<p>如果你使用了BoringSSL 我推荐<a href="https://www.imququ.com" target="_blank" rel="external">JerryQu</a>提供的算法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssl_ciphers [ECDHE-ECDSA-AES128-GCM-SHA256|ECDHE-ECDSA-CHACHA20-POLY1305]:[ECDHE-RSA-AES128-GCM-SHA256|ECDHE-RSA-CHACHA20-POLY1305]:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:AES128-GCM-SHA256:AES256-GCM-SHA384:DES-CBC3-SHA;</div></pre></td></tr></table></figure></p>
<p>另外,博主发现了几个BoringSSL的bug,希望大家注意!<br>1:BoringSSL下,nginx-ct模块目前处于失效状态,无法启用<br>2:安装好后编译nginx时会报错<br><code>|| n == SSL_R_NO_CIPHERS_SPECIFIED              /*183*/</code><br>解决方案 <code>nano ./src/event/ngx_event_openssl.c</code> ,然后删除这一行<br>另外,关于食用BoringSSL的方法,以及另外的一个BUG.可以查看JerryQu的文章<a href="https://imququ.com/post/optimize-ssl-ciphers-with-boringssl.html" target="_blank" rel="external">https://imququ.com/post/optimize-ssl-ciphers-with-boringssl.html</a><br><a id="more"></a></p>
</div></article></div></article><footer><hr><div class="flex-center top-gap"><div class="unit site-box"><a href="/hexo-theme-mbxo/post/Sphider-Bugs-Fix/">上一篇</a></div><div class="unit site-box"><a href="/hexo-theme-mbxo/post/A-Shadowsock-Bug/">下一篇</a></div></div><br><hr><div class="copyright"><p>© 2016   Base on <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="http://getmobicss.com/" target="_blank">Mobi.css</a>.</p></div></footer></div></div></body></html>